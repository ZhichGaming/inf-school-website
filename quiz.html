<!-- simple html page containing your name and an image -->
<!DOCTYPE html>
<html>
    <head>
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
        <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
        <title>Quiz</title>
        <link rel="stylesheet" href="css/global.css">
        <link rel="stylesheet" href="css/quiz.css">
    </head>
    <body>
        <div>
            <div class="header">
                <p class="title">Zhich</p>
                <a class="nav-link" href="index.html">Page d'acceuil</a>
                <a class="nav-link" href="horaire.html">Tableau</a>
                <a class="nav-link" href="quiz.html">Quiz</a>
                <a class="nav-link" href="memoire.html">Jeu de mémoire</a>
            </div>
            <div id="page-body" class="content root">
                <form id="form-body" class="content" action="" name="zhich-form">
                    <div class="quiz-column">
                        <div class="card welcome">
                            <div class="quiz-title">
                                <h2 class="quiz-title">Quiz sur </h2>
                                <h1 class="quiz-title quiz-title-name">Zhich</h1>
                            </div>
                            <p>Bienvenue sur mon quiz! Celui-ci contient des questions sur moi et elle va tester si vous me connaissez. Si vous repondez correctement a toutes les questions, vous ne gagnerez rien du tout. Bonne chance!</p>
                        </div>
                        <div class="card">
                            <p>Commençons par quelques questions très simples.</p>
                            <div class="question">
                                <label for="nom">Quel est mon nom?</label>
                                <input type="text" id="nom" name="nom" value="" placeholder="Bill Bye">
                            </div>
                            <br>
                            <div class="question">
                                <label for="nomSondeur">Et quel est ton nom?</label>
                                <input type="text" id="nomSondeur" name="nomSondeur" value="" placeholder="Dora l'exploratrice">
                            </div>
                        </div>
                        <div class="card">
                            <p>Savez-vous ceci?</p>
                            <div class="question">
                                <label for="naissance">Quel est ma date de naissance?</label>
                                <input type="date" id="naissance" name="naissance" value="">
                            </div>
                        </div>
                        <div class="card">
                            <p>Futur?</p>
                            <div class="question">
                                <label for="metier">Quel métier désire-je dans le futur?</label>
                                <input type="text" id="metier" name="metier" value="" placeholder="Joueur de la NBA">
                            </div>
                        </div>
                    </div>
                    <div class="quiz-column">
                        <div class="card">
                            <p>Continuons avec quelques questions sur ma culture.</p>
                            <div class="question">
                                <label for="origine">Quel est mon pays d'origine?</label>
                                <select id="origine" name="origine" value="">
                                    <option value="canada">Canada</option>
                                    <option value="chine">Chine</option>
                                    <option value="france">France</option>
                                    <option value="japon">Japon</option>
                                    <option value="coree">Coree</option>
                                    <option value="autre">Autre</option>
                                </select>
                            </div>
                            <br>
                            <div class="question">
                                <label for="sport">Quel est mon sport favori?</label>
                                <select id="sport" name="sport" value="">
                                    <option value="basketball">Basketball</option>
                                    <option value="aucun">Aucun</option>
                                    <option value="aucun">Aucun</option>
                                    <option value="football">Football</option>
                                    <option value="aucun">Aucun</option>
                                    <option value="aucun">Aucun</option>
                                    <option value="aucun">Aucun</option>
                                    <option value="aucun">Aucun</option>
                                    <option value="aucun">Aucun</option>
                                    <option value="aucun">Aucun</option>
                                </select>
                            </div>
                            <br>
                            <div class="question">
                                <label for="musique">Quel est mon groupe de musique favori?</label>
                                <select id="musique" name="musique" value="">
                                    <option value="yoasobi">Yoasobi</option>
                                    <option value="bts">BTS</option>
                                    <option value="imase">Imase</option>
                                </select>
                            </div>
                            <br>
                            <div class="question">
                                <label for="food">Quel est mon plat favori?</label>
                                <select id="food" name="food" value="">
                                    <option value="poutine">Poutine</option>
                                    <option value="sushi">Sushi</option>
                                    <option value="poulet">Poulet</option>
                                    <option value="autre">Autre</option>
                                </select>
                            </div>
                        </div>
                        <div class="card">
                            <p>Et finalement, quelques questions sur mes passions.</p>
                            <div>
                                <p id="movie" class="radio-question" for="movie">Quel est mon film favori?</p>
                                <input type="radio" name="movie" value="yourname">
                                <label for="movie">Your Name.</label><br>
                                <input type="radio" name="movie" value="weatheringwithyou">
                                <label for="movie">Weathering With You</label><br>
                                <input type="radio" name="movie" value="spiritedaway">
                                <label for="movie">Spirited Away</label><br>
                            </div>
                            <br>
                            <div>
                                <p id="game" class="radio-question" for="game">Quel est mon jeu favori?</p>
                                <input type="radio" name="game" value="minecraft">
                                <label for="game">Minecraft</label><br>
                                <input type="radio" name="game" value="valorant">
                                <label for="game">Valorant</label><br>
                                <input type="radio" name="game" value="leagueoflegends">
                                <label for="game">League of Legends</label><br>
                            </div>
                        </div>
                        <div class="card">
                            <div class="question">
                                <label>Soumettre</label>
                                <input class="submit-button" type="submit" value="Soumettre">
                            </div>
                        </div>
                    </div>
                </form>
                <div class="image">
                    <img src="https://wallpapersmug.com/download/840x1336/40fd04/macaron-brown-chocolate.jpg" alt="Desserts miam miam miam">
                </div>
            </div>
            <img id="submit-image" class="hidden submit-image" src="./images/correcting.jpeg"/>
        </div>
        <script>
            const form = document.forms['zhich-form'];

            form.addEventListener('submit', (event) => {
                event.preventDefault();
                const answers = {
                    nom: form.nom.value,
                    nomSondeur: form.nomSondeur.value,
                    naissance: form.naissance.value.toString(),
                    metier: form.metier.value,
                    origine: form.origine.value,
                    sport: form.sport.value,
                    musique: form.musique.value,
                    food: form.food.value,
                    movie: form.movie.value,
                    game: form.game.value,
                };
                console.log(answers);
                const correctAnswers = {
                    nom: 'Zhich',
                    nomSondeur: 'Dora l\'exploratrice', // Aucune autre réponse permise.
                    naissance: '2000-01-20',
                    metier: 'Programmeur',
                    origine: 'chine',
                    sport: 'aucun',
                    musique: 'yoasobi',
                    food: 'autre',
                    movie: 'yourname',
                    game: 'minecraft',
                };

                if (!containsAnswers()) {
                    return;
                }

                let score = 0;
                for (const key in answers) {
                    console.log(answers[key])
                    if (answers[key] == correctAnswers[key]) {
                        document.getElementById(key).classList.add('correct');
                        score++;
                    } else {
                        document.getElementById(key).classList.add('incorrect');
                    }
                }

                // alert(`Vous avez obtenu ${score} points sur 10!`);
                showSendAnimation();
            });

            function containsAnswers() {
                const answers = {
                    nom: form.nom.value,
                    nomSondeur: form.nomSondeur.value,
                    naissance: form.naissance.value,
                    metier: form.metier.value,
                    origine: form.origine.value,
                    sport: form.sport.value,
                    musique: form.musique.value,
                    food: form.food.value,
                    movie: form.movie.value,
                    game: form.game.value,
                };

                let result = true

                for (const key in answers) {
                    if (answers[key] == '') {
                        document.getElementById(key).classList.add('shake');
                        document.getElementById(key).addEventListener('animationend', () => {
                            document.getElementById(key).classList.remove('shake');
                        });

                        result = false;
                    }
                }

                return result;
            }

            function showSendAnimation() {
                const image = document.getElementById('submit-image');
                const form = document.getElementById('form-body');

                image.classList.remove('hidden');
                image.classList.add('submit-image-animate');

                form.classList.add('quiz-animate');

                image.addEventListener('animationend', () => {
                    image.classList.add('hidden');
                    image.classList.remove('submit-image-animate');
                });

                form.addEventListener('animationend', () => {
                    form.classList.remove('quiz-animate');
                });
            }
        </script>
    </body>
</html>
